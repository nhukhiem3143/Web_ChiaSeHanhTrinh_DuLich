<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng B√†i Vi·∫øt - Website Du L·ªãch</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/dang-bai.css">
    <link rel="icon" href="/uploads/icon.jpg" type="image/jpeg">
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places" defer></script>
</head>
<body>
    <header>
        <nav>
            <a href="/" class="logo">üå¥ Du L·ªãch</a>
            <ul class="nav-links">
                <li><a href="/">Trang Ch·ªß</a></li>
                <li><a href="/dang-bai" class="active">ƒêƒÉng B√†i</a></li>
            </ul>
            <div class="user-menu" id="userMenu"></div>
        </nav>
    </header>
    
    <main>
        <div class="create-post-container">
            <div class="create-post-header">
                <h1>ƒêƒÉng B√†i Vi·∫øt M·ªõi</h1>
                <p style="color: var(--text-secondary);">Chia s·∫ª tr·∫£i nghi·ªám du l·ªãch c·ªßa b·∫°n v·ªõi c·ªông ƒë·ªìng</p>
            </div>
            
            <form id="dang-bai-form" class="create-post-form">
                <!-- Basic Info Section -->
                <div class="form-section">
                    <h2 class="form-section-title">üìù Th√¥ng Tin C∆° B·∫£n</h2>
                    
                    <div class="form-group">
                        <label for="tieu_de">Ti√™u ƒê·ªÅ *</label>
                        <input type="text" id="tieu_de" name="tieu_de" placeholder="V√≠ d·ª•: Kh√°m ph√° ƒê√† L·∫°t 3 ng√†y 2 ƒë√™m" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="mo_ta_ngan">M√¥ T·∫£ Ng·∫Øn</label>
                        <input type="text" id="mo_ta_ngan" name="mo_ta_ngan" placeholder="T√≥m t·∫Øt ng·∫Øn g·ªçn v·ªÅ chuy·∫øn ƒëi...">
                    </div>
                    
                    <div class="form-group">
                        <label for="noi_dung">N·ªôi Dung Chi Ti·∫øt *</label>
                        <textarea id="noi_dung" name="noi_dung" placeholder="Chia s·∫ª chi ti·∫øt v·ªÅ h√†nh tr√¨nh, c·∫£m nh·∫≠n, kinh nghi·ªám..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="anh_bia">·∫¢nh B√¨a</label>
                        <input type="file" id="anh_bia" name="anh_bia" accept="image/*" onchange="previewImage(this)">
                        <div id="image-preview-container" class="image-preview-container"></div>
                    </div>
                </div>
                
                <!-- Category/Danh m·ª•c Section -->
                <div class="form-section">
                    <h2 class="form-section-title">üè∑Ô∏è Danh M·ª•c</h2>
                    <div class="category-selector">
                        <label class="category-chip">
                            <input type="checkbox" name="category" value="trong-nuoc">
                            <span>Trong n∆∞·ªõc</span>
                        </label>
                        <label class="category-chip">
                            <input type="checkbox" name="category" value="nuoc-ngoai">
                            <span>N∆∞·ªõc ngo√†i</span>
                        </label>
                        <label class="category-chip">
                            <input type="checkbox" name="category" value="an-uong">
                            <span>·∫®m th·ª±c</span>
                        </label>
                        <label class="category-chip">
                            <input type="checkbox" name="category" value="khach-san">
                            <span>Kh√°ch s·∫°n</span>
                        </label>
                        <label class="category-chip">
                            <input type="checkbox" name="category" value="phuong-tien">
                            <span>Ph∆∞∆°ng ti·ªán</span>
                        </label>
                        <label class="category-chip">
                            <input type="checkbox" name="category" value="tham-quan">
                            <span>Tham quan</span>
                        </label>
                    </div>
                </div>
                
                <!-- Date & Cost Section -->
                <div class="form-section">
                    <h2 class="form-section-title">üìÖ Th·ªùi Gian & Chi Ph√≠</h2>
                    
                    <div class="date-range">
                        <div class="form-group">
                            <label for="ngay_bat_dau">Ng√†y B·∫Øt ƒê·∫ßu</label>
                            <input type="date" id="ngay_bat_dau" name="ngay_bat_dau">
                        </div>
                        
                        <div class="form-group">
                            <label for="ngay_ket_thuc">Ng√†y K·∫øt Th√∫c</label>
                            <input type="date" id="ngay_ket_thuc" name="ngay_ket_thuc">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="tong_chi_phi">T·ªïng Chi Ph√≠ (VNƒê)</label>
                        <input type="number" id="tong_chi_phi" name="tong_chi_phi" step="1000" placeholder="V√≠ d·ª•: 5000000">
                    </div>
                </div>
                
                <!-- Location/ƒê·ªãa ƒëi·ªÉm Section -->
                <div class="form-section">
                    <h2 class="form-section-title">üìç ƒê·ªãa ƒêi·ªÉm & B·∫£n ƒê·ªì</h2>
                    <div id="dia-diem-container"></div>
                    <button type="button" class="add-dia-diem-btn" onclick="addDiaDiem()">
                        + Th√™m ƒê·ªãa ƒêi·ªÉm
                    </button>
                </div>
                
                <!-- Travel Info - Ph∆∞∆°ng ti·ªán, Kh√°ch s·∫°n, ƒê·ªì ƒÉn -->
                <div class="form-section">
                    <h2 class="form-section-title">üöó Ph∆∞∆°ng Ti·ªán & D·ªãch V·ª•</h2>
                    
                    <div id="phuong-tien-container" class="travel-info-section">
                        <h3 class="travel-info-title">üöó Ph∆∞∆°ng Ti·ªán ƒêi L·∫°i</h3>
                        <div id="phuong-tien-list"></div>
                        <button type="button" class="add-travel-info-btn" onclick="addPhuongTien()">
                            + Th√™m Ph∆∞∆°ng Ti·ªán
                        </button>
                    </div>
                    
                    <div id="khach-san-container" class="travel-info-section" style="margin-top: var(--spacing-lg);">
                        <h3 class="travel-info-title">üè® Kh√°ch S·∫°n/N∆°i ·ªû</h3>
                        <div id="khach-san-list"></div>
                        <button type="button" class="add-travel-info-btn" onclick="addKhachSan()">
                            + Th√™m Kh√°ch S·∫°n
                        </button>
                    </div>
                    
                    <div id="do-an-container" class="travel-info-section" style="margin-top: var(--spacing-lg);">
                        <h3 class="travel-info-title">üçú ƒê·ªì ƒÇn & Qu√°n ƒÇn</h3>
                        <div id="do-an-list"></div>
                        <button type="button" class="add-travel-info-btn" onclick="addDoAn()">
                            + Th√™m Qu√°n ƒÇn
                        </button>
                    </div>
                </div>
                
                <!-- Hashtag Section -->
                <div class="form-section">
                    <h2 class="form-section-title"># Hashtag</h2>
                    <div class="form-group">
                        <input type="text" id="hashtag" name="hashtag" placeholder="Nh·∫≠p hashtag v√† nh·∫•n Enter (v√≠ d·ª•: dalat, travel)">
                        <div id="hashtag-tags" class="hashtag-tags"></div>
                    </div>
                </div>
                
                <!-- Submit Section -->
                <div class="submit-section">
                    <button type="button" class="cancel-btn" onclick="window.location.href='/'">H·ªßy</button>
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span id="submitText">ƒêƒÉng B√†i</span>
                    </button>
                </div>
            </form>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Website Du L·ªãch. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
    </footer>

    <script src="/js/dang-bai.js"></script>
    <script src="/js/auth-check.js"></script>
    <script>
        // Preview image
        function previewImage(input) {
            const container = document.getElementById('image-preview-container');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    container.innerHTML = `<img src="${e.target.result}" class="image-preview" alt="Preview">`;
                };
                reader.readAsDataURL(input.files[0]);
            } else {
                container.innerHTML = '';
            }
        }
        
        // Category selector
        document.querySelectorAll('.category-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                const checkbox = this.querySelector('input[type="checkbox"]');
                checkbox.checked = !checkbox.checked;
                this.classList.toggle('selected', checkbox.checked);
            });
        });
        
        // Hashtag input
        let hashtags = [];
        document.getElementById('hashtag').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const hashtag = this.value.trim().toLowerCase();
                if (hashtag && !hashtags.includes(hashtag)) {
                    hashtags.push(hashtag);
                    this.value = '';
                    updateHashtagTags();
                }
            }
        });
        
        function updateHashtagTags() {
            const container = document.getElementById('hashtag-tags');
            container.innerHTML = hashtags.map(tag => `
                <span class="hashtag-tag">
                    #${tag}
                    <span class="hashtag-remove" onclick="removeHashtag('${tag}')">√ó</span>
                </span>
            `).join('');
        }
        
        function removeHashtag(tag) {
            hashtags = hashtags.filter(t => t !== tag);
            updateHashtagTags();
        }
        
        // Check authentication
        window.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            if (!token) {
                alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒëƒÉng b√†i!');
                window.location.href = '/dang-nhap';
            }
        });
    </script>
</body>
</html>
