<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Vi·∫øt - Website Du L·ªãch</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/xem-bai.css">
    <link rel="icon" href="/uploads/icon.jpg" type="image/jpeg">
</head>
<body>
    <header>
        <nav>
            <a href="/" class="logo">üå¥ Du L·ªãch</a>
            <ul class="nav-links">
                <li><a href="/">Trang Ch·ªß</a></li>
                <li><a href="/dang-bai">ƒêƒÉng B√†i</a></li>
            </ul>
            <div class="user-menu" id="userMenu"></div>
        </nav>
    </header>
    
    <main>
        <div class="post-detail-container">
            <!-- Post Detail Card -->
            <article class="post-detail-card" id="postDetailCard">
                <div class="post-header" id="postHeader">
                    <!-- Author info and post header will be loaded here -->
                </div>
                
                <div id="postImageContainer"></div>
                
                <div class="post-content-full" id="postContent">
                    <!-- Post content will be loaded here -->
                </div>
                
                <div class="post-meta-info" id="postMetaInfo">
                    <!-- Post stats will be loaded here -->
                </div>
                
                <div class="post-actions">
                    <button class="post-action-btn" id="likeBtn" onclick="showReactionPicker()">
                        <span>üëç</span> <span>Th√≠ch</span>
                    </button>
                    <button class="post-action-btn" id="commentBtn" onclick="scrollToComments()">
                        <span>üí¨</span> <span>B√¨nh lu·∫≠n</span>
                    </button>
                    <button class="post-action-btn" id="shareBtn">
                        <span>üì§</span> <span>Chia s·∫ª</span>
                    </button>
                    <button class="post-action-btn" id="reportBtn" onclick="showReportForm()" style="color: var(--danger-color);">
                        <span>‚ö†Ô∏è</span> <span>B√°o c√°o</span>
                    </button>
                </div>
                
                <!-- Reaction Picker (Facebook style) -->
                <div id="reactionPicker" class="reaction-picker" style="display: none;">
                    <button class="reaction-picker-btn" onclick="toggleReaction('like')" title="Th√≠ch">
                        <span style="font-size: 2rem;">üëç</span>
                    </button>
                    <button class="reaction-picker-btn" onclick="toggleReaction('love')" title="Y√™u th√≠ch">
                        <span style="font-size: 2rem;">üòç</span>
                    </button>
                    <button class="reaction-picker-btn" onclick="toggleReaction('laugh')" title="Haha">
                        <span style="font-size: 2rem;">üòÜ</span>
                    </button>
                    <button class="reaction-picker-btn" onclick="toggleReaction('cry')" title="Bu·ªìn">
                        <span style="font-size: 2rem;">üò≠</span>
                    </button>
                    <button class="reaction-picker-btn" onclick="toggleReaction('angry')" title="Ph·∫´n n·ªô">
                        <span style="font-size: 2rem;">üò†</span>
                    </button>
                    <button class="reaction-picker-btn" onclick="toggleReaction('dislike')" title="Kh√¥ng th√≠ch">
                        <span style="font-size: 2rem;">üëé</span>
                    </button>
                </div>
                
                <!-- Hashtags -->
                <div class="hashtags-section" id="hashtagsSection" style="display: none;">
                    <div class="hashtags-list" id="hashtagsList"></div>
                </div>
            </article>
            
                <!-- Location & Map Section -->
                <section class="location-section" id="locationSection" style="display: none;">
                    <h3>üìç ƒê·ªãa ƒêi·ªÉm</h3>
                    <div id="locationList"></div>
                </section>

                <section class="location-section" id="phuongTienSection" style="display: none;">
                    <h3>üöó Ph∆∞∆°ng Ti·ªán</h3>
                    <div id="phuongTienList"></div>
                </section>

                <!-- Kh√°ch S·∫°n Section -->
                <section class="location-section" id="khachSanSection" style="display: none;">
                    <h3>üè® Kh√°ch S·∫°n</h3>
                    <div id="khachSanList"></div>
                </section>

                <!-- ƒê·ªì ƒÇn Section -->
                <section class="location-section" id="doAnSection" style="display: none;">
                    <h3>üç≤ ƒê·ªì ƒÇn</h3>
                    <div id="doAnList"></div>
                </section>
                <!-- H·∫æT PH·∫¶N TH√äM -->

                <!-- Travel Info Section -->
                <section class="travel-info-section" id="travelInfoSection" style="display: none;">
                    <h3>üöó Th√¥ng Tin Du L·ªãch</h3>
                    <div class="travel-info-grid" id="travelInfoGrid"></div>
                </section>
            
            <!-- Reactions Section -->
            <section class="reactions-section" id="reactionsSection">
                <h3>üòä Reactions</h3>
                <div class="reaction-buttons" id="reactionButtons">
                    <!-- Reaction buttons will be loaded here -->
                </div>
                <div class="reaction-counts" id="reactionCounts">
                    <!-- Reaction counts will be loaded here -->
                </div>
            </section>
            
            <!-- Comments Section -->
            <section class="comments-section" id="commentsSection">
                <h3>üí¨ B√¨nh Lu·∫≠n</h3>
                <div id="commentsList" class="comments-list"></div>
                
                <form id="commentForm" class="comment-form">
                    <div class="comment-input-wrapper">
                        <textarea 
                            id="commentInput" 
                            class="comment-input" 
                            placeholder="Vi·∫øt b√¨nh lu·∫≠n..."
                            rows="1"
                            onkeydown="handleCommentKeydown(event)"
                        ></textarea>
                    </div>
                    <button type="submit" class="comment-submit-btn" id="commentSubmitBtn">
                        G·ª≠i
                    </button>
                </form>
            </section>
            
            <!-- Report Section -->
            <section class="report-section" id="reportSection" style="display: none;">
                <h3>‚ö†Ô∏è B√°o C√°o B√†i Vi·∫øt</h3>
                <p style="color: var(--text-secondary); margin-bottom: var(--spacing-lg);">N·∫øu b·∫°n th·∫•y b√†i vi·∫øt n√†y vi ph·∫°m quy t·∫Øc, vui l√≤ng b√°o c√°o</p>
                
                <form id="reportForm" class="report-form">
                    <div class="form-group">
                        <label>Lo·∫°i B√°o C√°o *</label>
                        <select id="loaiBaoCao" name="loai_bao_cao" required>
                            <option value="">Ch·ªçn lo·∫°i b√°o c√°o...</option>
                            <option value="spam">Spam ho·∫∑c l·ª´a ƒë·∫£o</option>
                            <option value="noi_dung_khong_phu_hop">N·ªôi dung kh√¥ng ph√π h·ª£p</option>
                            <option value="quang_cao">Qu·∫£ng c√°o kh√¥ng ƒë∆∞·ª£c ph√©p</option>
                            <option value="vi_pham_ban_quyen">Vi ph·∫°m b·∫£n quy·ªÅn</option>
                            <option value="khac">Kh√°c</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="lyDoBaoCao">L√Ω Do Chi Ti·∫øt *</label>
                        <textarea 
                            id="lyDoBaoCao" 
                            name="ly_do" 
                            placeholder="Vui l√≤ng m√¥ t·∫£ chi ti·∫øt l√Ω do b√°o c√°o..." 
                            rows="4"
                            required
                            maxlength="500"
                        ></textarea>
                        <div class="char-count">
                            <span id="reportCharCount">0</span>/500 k√Ω t·ª±
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeReportForm()">H·ªßy</button>
                        <button type="submit" class="btn btn-primary" id="reportSubmitBtn">
                            <span id="reportSubmitText">G·ª≠i B√°o C√°o</span>
                        </button>
                    </div>
                </form>
            </section>
            
            <!-- Share Section -->
            <section class="share-section" id="shareSection" style="display: none;">
                <h3>üì§ Chia S·∫ª</h3>
                <div class="share-count" id="shareCount">S·ªë l∆∞·ª£t chia s·∫ª: 0</div>
                
                <div class="share-options">
                    <button class="share-option-btn" onclick="shareToFacebook()">
                        <span style="font-size: 1.5rem;">üìò</span>
                        <span>Facebook</span>
                    </button>
                    <button class="share-option-btn" onclick="shareToInstagram()">
                        <span style="font-size: 1.5rem;">üì∑</span>
                        <span>Instagram</span>
                    </button>
                    <button class="share-option-btn" onclick="copyPostLink()">
                        <span style="font-size: 1.5rem;">üîó</span>
                        <span>Sao ch√©p link</span>
                    </button>
                </div>
                
                <div style="margin-top: var(--spacing-lg); padding-top: var(--spacing-lg); border-top: 1px solid var(--divider-color);">
                    <h4 style="margin-bottom: var(--spacing-md); font-size: 1rem;">Chia s·∫ª v·ªÅ t√†i kho·∫£n c·ªßa b·∫°n</h4>
                    <form id="shareForm" class="share-form">
                        <textarea 
                            id="shareTextarea" 
                            class="share-textarea" 
                            placeholder="Vi·∫øt g√¨ ƒë√≥ v·ªÅ b√†i vi·∫øt n√†y..."
                            rows="3"
                        ></textarea>
                        <button type="submit" class="share-submit-btn" id="shareSubmitBtn">
                            Chia S·∫ª
                        </button>
                    </form>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Website Du L·ªãch. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
    </footer>

    <script src="/js/xem-bai.js"></script>
    <script src="/js/auth-check.js"></script>
    <script>
        // Handle comment input auto-resize and Enter key
        document.addEventListener('DOMContentLoaded', function() {
            const commentInput = document.getElementById('commentInput');
            if (commentInput) {
                commentInput.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = (this.scrollHeight) + 'px';
                });
                
                commentInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        document.getElementById('commentForm').dispatchEvent(new Event('submit'));
                    }
                });
            }
        });
    </script>
</body>
</html>
